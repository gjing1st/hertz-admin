#
## ğŸŒ±1 åŸºæœ¬ä»‹ç»
### 1.1 é¡¹ç›®ç®€ä»‹
åŸºäºå­—èŠ‚hertzçš„åå°ç®¡ç†æ¡†æ¶,æ•´ä½“æ¶æ„å¸ƒå±€é‡‡ç”¨ `51k` Starçš„ `https://github.com/golang-standards/project-layout` è§„èŒƒ
## ğŸ“2. ä½¿ç”¨è¯´æ˜
### 2.1 ç›®å½•ç»“æ„
```shell
â”œâ”€â”€ build # æ¥å£æ–‡æ¡£
|   â”œâ”€â”€ ci # æŒç»­é›†æˆæ‰“åŒ…è„šæœ¬
|   â””â”€â”€ docker # Dockerfile
â”œâ”€â”€ cmd 
|   â””â”€â”€ ha # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ configs # é…ç½®æ–‡ä»¶
â”œâ”€â”€ deployments # é¡¹ç›®éƒ¨ç½²æ–‡ä»¶
|   â”œâ”€â”€ docker-compose  # ä»¥docker-composeå½¢å¼éƒ¨ç½²ç›¸å…³é…ç½®æ–‡ä»¶
|   â”œâ”€â”€ jenkins # Jenkins-DevOpsç›¸å…³é…ç½®æ–‡ä»¶
|   â””â”€â”€ k8s # ä»¥k8sè¿è¡Œdeploymenté…ç½®æ–‡ä»¶
â”œâ”€â”€ docs # æ–‡æ¡£
â”œâ”€â”€ internal # é¡¹ç›®æ ¸å¿ƒå†…éƒ¨æ¨¡å—
|   â”œâ”€â”€ apiserver # apiæ¥å£ï¼šMVCSSç»“æ„,è·¯ç”±ã€æ¨¡å‹ã€æ•°æ®åº“ã€ç¼“å­˜ã€æ§åˆ¶å™¨ã€æœåŠ¡ç­‰
|   â””â”€â”€ pkg # å†…éƒ¨å…¬å…±æ¨¡å—ï¼šä¸­é—´ä»¶ã€æ—¥å¿—ã€é…ç½®ç­‰
â”œâ”€â”€ pkg # å…¬å…±æ¨¡å—ï¼šé”™è¯¯ã€å·¥å…·ç­‰
â”œâ”€â”€ scripts # è„šæœ¬
â”œâ”€â”€ version # ç‰ˆæœ¬ä¿¡æ¯
|    â””â”€â”€ version.sh # ç‰ˆæœ¬ä¿¡æ¯è„šæœ¬
â””â”€â”€ Makefile # é¡¹ç›®æ„å»ºè„šæœ¬
```
### 2.2 å…³äºerrorå¤„ç†
æ‰€æœ‰errorè½¬æ¢ä¸ºå¯è§‚æµ‹çš„é”™è¯¯ç ï¼Œç»Ÿä¸€å¤„ç†
å…·ä½“å¯å‚è€ƒ`pkg/errorcode`ç›®å½•ä¸‹çš„é”™è¯¯ç å®šä¹‰
### 2.3 å…³äºæ—¥å¿—
æ‰€æœ‰æ—¥å¿—ä½¿ç”¨`github.com/sirupsen/logrus`å°è£…æ—¥å¿—å¤„ç†
å…·ä½“å¯å‚è€ƒ`internal/pkg/functions`ç›®å½•ä¸‹çš„æ—¥å¿—å¤„ç†
### 2.4 å…³äºç‰ˆæœ¬æ§åˆ¶
- ç‰ˆæœ¬æ§åˆ¶å®šä¹‰åœ¨`version/version.go`æ–‡ä»¶ä¸­
- ç‰ˆæœ¬ä¿¡æ¯åœ¨æ‰“åŒ…æ—¶å°†gitç‰ˆæœ¬ä¿¡æ¯é€šè¿‡ä¼ å‚å½¢å¼æ„å»ºåˆ°äºŒè¿›åˆ¶æ–‡ä»¶ä¸­ï¼Œæ–¹ä¾¿åç»­ç‰ˆæœ¬æ§åˆ¶ï¼Œå…·ä½“å¯æŸ¥çœ‹Makefile
- æœ¬é¡¹ç›®ä½¿ç”¨git tagè¿›è¡Œç‰ˆæœ¬æ§åˆ¶ï¼Œè‹¥éœ€è¦ä½¿ç”¨gitåˆ†æ”¯ç‰ˆæœ¬ï¼Œè¯·ä¿®æ”¹version/version.shå’ŒMakefileä¸­GIT_VERSIONã€‚

## ğŸš€3. æ‰“åŒ…æ–¹å¼
### ç›´æ¥æ‰“åŒ…
go build cmd/ha/main.go
### dockeræ‰“åŒ…
ä½¿ç”¨./script/docker/Dockerfileæ‰“åŒ…
docker build -f ./build/docker/Dockerfile -t ha:v1.0.0 .
### åŸºäºgitlabçš„è‡ªåŠ¨æ‰“åŒ…
å¯å‚è€ƒ.gitlab-ci.yml
### åŸºäºKubeSphereçš„DevOps
å¯å‚è€ƒ./deployments/jenkinså’Œ./deployments/k8s å¯å®ç°è‡ªåŠ¨æ‰“åŒ…å¹¶éƒ¨ç½²è‡³k8s

## âš¡ï¸4. Makefile
### è¿è¡Œç¨‹åº
```shell
make run
```
å€Ÿé‰´k8sç‰ˆæœ¬æ§åˆ¶ï¼Œåœ¨ç¼–è¯‘æ—¶å°†gitç‰ˆæœ¬ä¿¡æ¯å†™å…¥äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæ–¹ä¾¿åç»­ç‰ˆæœ¬æ§åˆ¶
### ç¼–è¯‘ä¸ºäºŒè¿›åˆ¶å¯æ‰§è¡Œç¨‹åº
```shell
make build
```
### æ‰“åŒ…ä¸ºdockerå¹¶å¯¼å‡ºé•œåƒ
```shell
make docker
```
### æ¨é€åˆ°é•œåƒä»“åº“
```shell
make push_docker
```
## ğŸ‰5 å…¶ä»–è¯´æ˜
### 5.1 ç”Ÿæˆswag 
```shell
swag init -g ./cmd/ha/main.go
```